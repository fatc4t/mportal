<?php
    /**
     * @file      組織カレンダマスタ画面(View)
     * @author    USE Y.Sugou
     * @date      2016/06/30
     * @version   1.00
     * @note      組織カレンダマスタ画面(一覧部分)
     */
?>
<?php
?>

            <?php require_once( SystemParameters::$SANITIZE_SETTING_FILE ) ?>
            <!-- ajax差し替えエリア -->
            <div id="jquery-replace-ajax">
                <!-- オリジナルコンテキストメニューを使用する為のInclude Start -->
                <script src="../js/attendance/jquery/jquery.contextmenu.r2.js" /></script>
                <script type="text/javascript">
                    // 検索条件の日付を更新
                    $('#datetext').val( '<?php echo $toYm; ?>' );
                </script>
                <!-- オリジナルコンテキストメニューを使用する為のInclude End -->
                <!-- serchListArea -->
                <div class="serchListArea screenSize" style="width:99%; margin:5px auto !important;">
                    <table>
                        <tr>
                            <td style="background-color:#FF0; text-align:center;">法定休暇設定</td>
                        </tr>
                        <tr>
                            <td style="text-align:center;">
                                    <?php 
                                        // 変数初期化
                                        $isSundayChecked = "";
                                        $publicHolidayChecked = "";
                                        $isSaturday1Checked = "";
                                        $isSaturday2Checked = "";
                                        $isSaturday3Checked = "";
                                        $isSaturday4Checked = "";
                                        $isSaturday5Checked = "";
                                        if($mCalendarList['is_sunday'] == SystemParameters::$STATUTORY_HOLIDAY)
                                        {
                                            $isSundayChecked = "checked";
                                        }
                                        if($mCalendarList['is_public_holiday'] == SystemParameters::$STATUTORY_HOLIDAY)
                                        {
                                            $publicHolidayChecked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_1'] == SystemParameters::$STATUTORY_HOLIDAY)
                                        {
                                            $isSaturday1Checked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_2'] == SystemParameters::$STATUTORY_HOLIDAY)
                                        {
                                            $isSaturday2Checked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_3'] == SystemParameters::$STATUTORY_HOLIDAY)
                                        {
                                            $isSaturday3Checked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_4'] == SystemParameters::$STATUTORY_HOLIDAY)
                                        {
                                            $isSaturday4Checked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_5'] == SystemParameters::$STATUTORY_HOLIDAY)
                                        {
                                            $isSaturday5Checked = "checked";
                                        }
                                    ?>
                                    <input type="checkbox" id="chk1-1" name="sunday" value="1-1" onclick="chkBoxUnCheck(this)" <?php hsc($isSundayChecked); ?>><span class="chkBoxMargin">日曜日</span>
                                    <input type="checkbox" id="chk1-2" name="publicHoliday" value="1-2" onclick="chkBoxUnCheck(this)" <?php hsc($publicHolidayChecked); ?>><span class="chkBoxMargin">祝日</span>
                                    <input type="checkbox" id="chk1-3" name="saturday_1" value="1-3" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday1Checked); ?>><span class="chkBoxMargin">第一土曜日</span>
                                    <input type="checkbox" id="chk1-4" name="saturday_2" value="1-4" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday2Checked); ?>><span class="chkBoxMargin">第二土曜日</span>
                                    <input type="checkbox" id="chk1-5" name="saturday_3" value="1-5" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday3Checked); ?>><span class="chkBoxMargin">第三土曜日</span>
                                    <input type="checkbox" id="chk1-6" name="saturday_4" value="1-6" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday4Checked); ?>><span class="chkBoxMargin">第四土曜日</span>
                                    <input type="checkbox" id="chk1-7" name="saturday_5" value="1-7" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday5Checked); ?>><span>第五土曜日</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="background-color:#FF0; text-align:center;">公休日設定</td>
                        </tr>
                        <tr>
                            <td style="text-align:center;">
                                    <?php
                                        // 変数初期化
                                        $isSundayChecked = "";
                                        $publicHolidayChecked = "";
                                        $isSaturday1Checked = "";
                                        $isSaturday2Checked = "";
                                        $isSaturday3Checked = "";
                                        $isSaturday4Checked = "";
                                        $isSaturday5Checked = "";
                                        if($mCalendarList['is_sunday'] == SystemParameters::$PUBLIC_HOLIDAY)
                                        {
                                            $isSundayChecked = "checked";
                                        }
                                        if($mCalendarList['is_public_holiday'] == SystemParameters::$PUBLIC_HOLIDAY)
                                        {
                                            $publicHolidayChecked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_1'] == SystemParameters::$PUBLIC_HOLIDAY)
                                        {
                                            $isSaturday1Checked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_2'] == SystemParameters::$PUBLIC_HOLIDAY)
                                        {
                                            $isSaturday2Checked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_3'] == SystemParameters::$PUBLIC_HOLIDAY)
                                        {
                                            $isSaturday3Checked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_4'] == SystemParameters::$PUBLIC_HOLIDAY)
                                        {
                                            $isSaturday4Checked = "checked";
                                        }
                                        if($mCalendarList['is_saturday_5'] == SystemParameters::$PUBLIC_HOLIDAY)
                                        {
                                            $isSaturday5Checked = "checked";
                                        }
                                    ?>
                                    <input type="checkbox" id="chk2-1" name="sunday" value="2-1" onclick="chkBoxUnCheck(this)" <?php hsc($isSundayChecked); ?>><span class="chkBoxMargin">日曜日</span>
                                    <input type="checkbox" id="chk2-2" name="publicHoliday" value="2-2" onclick="chkBoxUnCheck(this)" <?php hsc($publicHolidayChecked); ?>><span class="chkBoxMargin">祝日</span>
                                    <input type="checkbox" id="chk2-3" name="saturday_1" value="2-3" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday1Checked); ?>><span class="chkBoxMargin">第一土曜日</span>
                                    <input type="checkbox" id="chk2-4" name="saturday_2" value="2-4" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday2Checked); ?>><span class="chkBoxMargin">第二土曜日</span>
                                    <input type="checkbox" id="chk2-5" name="saturday_3" value="2-5" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday3Checked); ?>><span class="chkBoxMargin">第三土曜日</span>
                                    <input type="checkbox" id="chk2-6" name="saturday_4" value="2-6" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday4Checked); ?>><span class="chkBoxMargin">第四土曜日</span>
                                    <input type="checkbox" id="chk2-7" name="saturday_5" value="2-7" onclick="chkBoxUnCheck(this)" <?php hsc($isSaturday5Checked); ?>><span>第五土曜日</span>
                            </td>
                        </tr>
                    </table>
                    <br>
                    <div>
                        <label id="organizationLabel" >組織名：
                            <?php foreach($abbreviatedNameList as $abbreviated) { ?>
                                <?php if($abbreviated['organization_id'] == $searchArray['organizationID']) { ?>
                                <?php hsc($abbreviated['abbreviated_name']); ?>
                                <?php } ?>
                            <?php } ?>
                        </label>
                        　　<label id="targetLabel" >年月：<?php echo $toYm; ?></label>
                    </div><!-- style="float: left;" -->
                    
                    <div style="clear: both;"></div><!-- style="clear: both;" -->
                    <!-- serchListArea -->
                    <?php
                        $datePrev = date('Y/m', strtotime( "-1 month", strtotime($toYm . "/01" ) ) );
                        $dateNext = date('Y/m', strtotime( "+1 month", strtotime($toYm . "/01" ) ) );
                    ?>
                    <input type="hidden" id="target_date_prev" name="target_date_prev" value="<?php hsc($datePrev); ?>" >
                    <input type="hidden" id="target_date_next" name="target_date_next" value="<?php hsc($dateNext); ?>" >
                    <label style="border-style:solid; border-width: 0px; width: 80px; height: 20px; float:left; margin: 10px 10px 10px 10px ;"><a href="#" onClick="dateMoved(0)" >＜＜</a> 前月</label>
                    <label style="border-style:solid; border-width: 0px; width: 80px; height: 20px; float:right; margin: 10px 0px 10px 10px ;">翌月 <a href="#" onClick="dateMoved(1)" >＞＞</a></label>
                    <table id="calendarTbl" style="background-color: #ffffff">
                        <tr>
                            <td id="calHeaderCellSunDay">日</td>
                            <td class="calHeaderCell">月</td>
                            <td class="calHeaderCell">火</td>
                            <td class="calHeaderCell">水</td>
                            <td class="calHeaderCell">木</td>
                            <td class="calHeaderCell">金</td>
                            <td id="calHeaderCellSatDay">土</td>
                        </tr>
                        <?php
                        for($c = 0; $c < count($calList); $c++)
                        {
                            echo $calList[$c];
                        } ?>
                        </tr>
                    </table>
                    <br>
                    <div class="logicButtonArea" align="center">
                        <?php $add_disabled = ""; ?>
                        <?php if(empty($regFlag)) { ?>
                            <?php $add_disabled = "disabled"; ?>
                        <?php } ?>
                        <input type="submit" value="<?php hsc($Log->getMsgLog('MSG_BASE_0802')); ?>"  style="width: 100px" id="editButton" class="update" <?php hsc($add_disabled); ?> />
                        <input type="hidden" value="<?php hsc($mCalendarList['update_time']); ?>" id="updateTime" />
                        <input type="hidden" value="<?php hsc($searchArray['organizationID']); ?>" id="add_organization_id" />
                        <input type="hidden" value="<?php hsc($toYm); ?>" id="add_datetext" />
                    </div><!-- /.logicButtonArea -->
                </div><!-- /.serchListArea -->
            </div><!-- /.jquery-replace-ajax -->
